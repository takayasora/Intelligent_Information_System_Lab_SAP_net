# sequential SAP-net



# ネットワーク描画のテスト
- 作成したいネットワークのつながりを表したクロス表をsqlite3を用いて作成

```python
cross_table_ex = [
    [0, 0.2, 3, 0, 0, 0],
    [0.2, 0, 2, 4, 6, 0],
    [3, 2, 0, 0, 0, 3],
    [0, 4, 0, 0, 0, 0],
    [0, 6, 0, 0, 0, 0],
    [0, 0, 3, 0, 0, 0]
]
```
クロス表内の値が0以上である場合、ノードが繋がっているかつ、その値の距離が設定される

- networkxを用いて空のネットワーク図の作成
- クロス表のつながりを基にノードとエッジを追加
- 各ノード間に距離を設定
# 縦棒グラフの描画のテスト
- 作成したいネットワークのつながりを表したクロス表の同値交点に各ノードの活性値を設定する

```python
cross_table_ex = [
    [1, 0.2, 3, 0, 0, 0],
    [0.2, 3, 2, 4, 6, 0],
    [3, 2, 4, 0, 0, 3],
    [0, 4, 0, 5, 0, 0],
    [0, 6, 0, 0, 2, 0],
    [0, 0, 3, 0, 0, 8]
]
```
- 活性値の値を取り出し、縦棒グラフに描画する
- 縦軸が活性値の値・横軸がノード

# クロス表内の値を変えるテスト
- クロス表内の活性値を更新する
  
  任意のノードを選択し、そのノードに対応する活性値をネットワークのつながりを基に更新する
  ノードiが活性化され、活性値が$a_i$であった場合、隣接するノードjに活性値が拡散されるとき、次式の$\eta_i$の分だけ活性値が伝播する

  更新式
  $\eta_i=\displaystyle\frac{1}{N}A_iexp(-\omega_{ij})$

  - Nはノードが持つパスの数
  - $A_i$は活性値
  - $\omega$はパスの重み（パスの長さ）

  
  <img src = "https://i.gyazo.com/09386be32ad51861b6ffb53206db1fc3.jpg" width = "310">

  
- 上記図のように、ネットワーク内にサイクルが存在する場合
    - ノード$\pi_i$から活性値が拡散されきた重み$\omega_{ij}$と$\omega_{ik}$のパスは、ノード$\pi_j$と$\pi_k$から見れば入力パスであり、その直後の活性値の拡散には用いない。すなわち、$\pi_j$と$\pi_k$は重$\omega_{jk}$のパスを通じて拡散しあう。拡散しあう前に、$\pi_j$と$\pi_k$の活性値を比較し、大きい方から小さいほうに差分計算を行う。

# クロス表内の値の減衰テスト



